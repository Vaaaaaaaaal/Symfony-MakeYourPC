{% extends 'base.html.twig' %}

{% block title %}Modifier un produit - MakeYourPC{% endblock %}

{% block body %}
    <div class="container">
        <div class="edit-header">
            <h1>
                <i data-lucide="edit-3"></i>
                Modifier le produit
            </h1>
            <nav class="breadcrumb">
                <a href="{{ path('app_admin_products') }}">Produits</a>
                <i data-lucide="chevron-right"></i>
                <span>Modification</span>
            </nav>
        </div>

        {% for message in app.flashes('success') %}
            <div class="alert success">
                <i data-lucide="check-circle"></i>
                {{ message }}
            </div>
        {% endfor %}

        {% for message in app.flashes('error') %}
            <div class="alert error">
                <i data-lucide="alert-circle"></i>
                {{ message }}
            </div>
        {% endfor %}

        {{ form_start(form, {'attr': {'class': 'edit-form'}}) }}
            <div class="form-grid">
                <div class="form-card">
                    <div class="card-header">
                        <i data-lucide="info"></i>
                        <h2>Informations générales</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            {{ form_label(form.name, 'Nom du produit') }}
                            {{ form_widget(form.name, {'attr': {'class': 'form-input'}}) }}
                            {{ form_errors(form.name) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.type, 'Catégorie') }}
                            {{ form_widget(form.type, {'attr': {'class': 'form-select'}}) }}
                            {{ form_errors(form.type) }}
                        </div>
                    </div>
                </div>

                <div class="form-card">
                    <div class="card-header">
                        <i data-lucide="shopping-cart"></i>
                        <h2>Prix et stock</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            {{ form_label(form.price, 'Prix (€)') }}
                            <div class="price-input">
                                {{ form_widget(form.price, {'attr': {'class': 'form-input'}}) }}
                            </div>
                            {{ form_errors(form.price) }}
                        </div>

                        <div class="form-group">
                            {{ form_label(form.stock, 'Stock disponible') }}
                            {{ form_widget(form.stock, {'attr': {'class': 'form-input'}}) }}
                            {{ form_errors(form.stock) }}
                        </div>
                    </div>
                </div>

                <div class="form-card full-width">
                    <div class="card-header">
                        <i data-lucide="image"></i>
                        <h2>Image du produit</h2>
                    </div>
                    <div class="card-body">
                        <div class="image-upload">
                            <div class="current-image">
                                {% if product.imagePath %}
                                    <img src="{{ asset('images/products/' ~ product.imagePath) }}" alt="Image actuelle">
                                {% else %}
                                    <div class="no-image">
                                        <i data-lucide="image-off"></i>
                                        <p>Aucune image</p>
                                    </div>
                                {% endif %}
                            </div>
                            <div class="upload-zone">
                                {{ form_widget(form.image, {'attr': {'class': 'file-input'}}) }}
                                <div class="upload-info">
                                    <i data-lucide="upload-cloud"></i>
                                    <p>Glissez une image ou cliquez pour sélectionner</p>
                                    <span>Formats acceptés : JPEG, PNG, WEBP (max 1MB)</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-save">
                    <i data-lucide="save"></i>
                    Enregistrer les modifications
                </button>
                <a href="{{ path('app_admin_products') }}" class="btn-cancel">
                    <i data-lucide="x"></i>
                    Annuler
                </a>
            </div>
        {{ form_end(form) }}
    </div>
{% endblock %} 